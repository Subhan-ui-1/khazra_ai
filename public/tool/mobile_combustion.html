<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Combustion Module - Interactive UX Flow</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1565C0 0%, #0D47A1 100%);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 600;
        }

        .breadcrumb {
            font-size: 14px;
            opacity: 0.8;
        }

        .progress-bar {
            background: #ecf0f1;
            height: 8px;
            position: relative;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4CAF50, #66BB6A);
            height: 100%;
            transition: width 0.3s ease;
        }

        .step-indicator {
            background: white;
            padding: 20px 30px;
            border-bottom: 1px solid #ecf0f1;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .step-circles {
            display: flex;
            gap: 15px;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #bdc3c7;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            transition: all 0.3s ease;
            position: relative;
        }

        .step-circle.active {
            background: #2196F3;
            transform: scale(1.1);
        }

        .step-circle.completed {
            background: #4CAF50;
        }

        .step-circle::after {
            content: '';
            position: absolute;
            right: -23px;
            top: 50%;
            transform: translateY(-50%);
            width: 8px;
            height: 2px;
            background: #bdc3c7;
        }

        .step-circle:last-child::after {
            display: none;
        }

        .content {
            padding: 40px;
            min-height: 500px;
        }

        .step {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .step.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step h2 {
            color: #1565C0;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .step-description {
            color: #546E7A;
            margin-bottom: 30px;
            font-size: 16px;
            line-height: 1.6;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #1565C0;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #E3F2FD;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #2196F3;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            align-items: end;
        }

        .form-triple {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            align-items: end;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);
        }

        .btn-secondary {
            background: #78909C;
            color: white;
        }

        .btn-secondary:hover {
            background: #607D8B;
        }

        .btn-success {
            background: linear-gradient(135deg, #4CAF50, #66BB6A);
            color: white;
        }

        .button-group {
            margin-top: 40px;
            display: flex;
            justify-content: space-between;
        }

        .card {
            background: #F8F9FA;
            border: 2px solid #E3F2FD;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            transition: all 0.3s ease;
        }

        .card:hover {
            border-color: #2196F3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .vehicle-option {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 2px solid #E3F2FD;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .vehicle-option:hover {
            border-color: #2196F3;
            background: #F3E5F5;
        }

        .vehicle-option.selected {
            border-color: #4CAF50;
            background: #E8F5E8;
        }

        .vehicle-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
        }

        .car { background: #2196F3; }
        .truck { background: #FF9800; }
        .van { background: #9C27B0; }
        .motorcycle { background: #F44336; }
        .bus { background: #4CAF50; }
        .equipment { background: #795548; }

        .calculation-preview {
            background: linear-gradient(135deg, #FF9800, #F57C00);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
        }

        .calculation-preview h3 {
            margin-bottom: 10px;
        }

        .emission-result {
            font-size: 24px;
            font-weight: bold;
        }

        .summary-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .summary-table th,
        .summary-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #E3F2FD;
        }

        .summary-table th {
            background: #F3E5F5;
            font-weight: 600;
            color: #1565C0;
        }

        .success-message {
            background: linear-gradient(135deg, #4CAF50, #66BB6A);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin: 20px 0;
        }

        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .dashboard-card {
            background: white;
            border: 1px solid #E3F2FD;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .dashboard-card h3 {
            color: #1565C0;
            margin-bottom: 10px;
        }

        .dashboard-card .value {
            font-size: 24px;
            font-weight: bold;
            color: #2196F3;
        }

        .file-upload {
            border: 2px dashed #90CAF9;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload:hover {
            border-color: #2196F3;
            background: #F3E5F5;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: #90CAF9;
            border-radius: 15px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .toggle-switch.active {
            background: #4CAF50;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }

        .toggle-switch.active::after {
            transform: translateX(30px);
        }

        .factor-display {
            background: #E3F2FD;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .factor-display .factor-value {
            font-weight: bold;
            color: #1565C0;
        }

        .factor-display .factor-source {
            font-size: 12px;
            color: #546E7A;
        }

        .responsive-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .input-method-toggle {
            display: flex;
            background: #E3F2FD;
            border-radius: 8px;
            padding: 4px;
            margin-bottom: 20px;
        }

        .input-method-toggle button {
            flex: 1;
            padding: 10px;
            border: none;
            background: transparent;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .input-method-toggle button.active {
            background: white;
            color: #1565C0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .vehicle-details {
            background: #F3E5F5;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .trip-card {
            background: white;
            border: 1px solid #E3F2FD;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .efficiency-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }

        .efficiency-good { background: #C8E6C9; color: #2E7D32; }
        .efficiency-average { background: #FFE0B2; color: #F57C00; }
        .efficiency-poor { background: #FFCDD2; color: #C62828; }

        @media (max-width: 768px) {
            .content {
                padding: 20px;
            }
            
            .form-row, .form-triple {
                grid-template-columns: 1fr;
            }
            
            .button-group {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Scope 1 - Mobile Combustion</h1>
            <div class="breadcrumb">Dashboard > Scope 1 > Mobile Combustion</div>
        </div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        
        <div class="step-indicator">
            <div class="step-circles">
                <div class="step-circle active" data-step="1">1</div>
                <div class="step-circle" data-step="2">2</div>
                <div class="step-circle" data-step="3">3</div>
                <div class="step-circle" data-step="4">4</div>
                <div class="step-circle" data-step="5">5</div>
                <div class="step-circle" data-step="6">6</div>
                <div class="step-circle" data-step="7">7</div>
                <div class="step-circle" data-step="8">8</div>
                <div class="step-circle" data-step="9">9</div>
            </div>
            <div class="step-title" id="stepTitle">Fleet Overview</div>
        </div>

        <div class="content">
            <!-- Step 1: Fleet Overview -->
            <div class="step active" id="step1">
                <h2>üöó Welcome to Mobile Combustion Module</h2>
                <p class="step-description">
                    Track and calculate emissions from your vehicle fleet, business travel, and mobile equipment. Monitor fuel consumption, mileage, and transportation-related emissions across your organization.
                </p>
                
                <div class="dashboard-cards">
                    <div class="dashboard-card">
                        <h3>Active Fleet</h3>
                        <div class="value">47</div>
                        <p>Vehicles tracked</p>
                    </div>
                    <div class="dashboard-card">
                        <h3>This Month</h3>
                        <div class="value">156.8</div>
                        <p>tonnes CO‚ÇÇe</p>
                    </div>
                    <div class="dashboard-card">
                        <h3>Total Distance</h3>
                        <div class="value">28,450</div>
                        <p>km traveled</p>
                    </div>
                    <div class="dashboard-card">
                        <h3>Fuel Efficiency</h3>
                        <div class="value">8.2</div>
                        <p>L/100km average</p>
                    </div>
                </div>

                <div class="card">
                    <h3>üöô Recent Fleet Activity</h3>
                    <table class="summary-table">
                        <thead>
                            <tr>
                                <th>Vehicle</th>
                                <th>Type</th>
                                <th>Distance (km)</th>
                                <th>Fuel Used (L)</th>
                                <th>Emissions (tCO‚ÇÇe)</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>üöó ABC-123</td>
                                <td>Sedan</td>
                                <td>1,247</td>
                                <td>98.2</td>
                                <td>0.23</td>
                                <td>‚úÖ Complete</td>
                            </tr>
                            <tr>
                                <td>üöõ XYZ-789</td>
                                <td>Delivery Truck</td>
                                <td>2,890</td>
                                <td>425.7</td>
                                <td>1.12</td>
                                <td>‚úÖ Complete</td>
                            </tr>
                            <tr>
                                <td>üöê DEF-456</td>
                                <td>Service Van</td>
                                <td>1,865</td>
                                <td>167.3</td>
                                <td>0.44</td>
                                <td>‚ö†Ô∏è Pending Review</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Step 2: Vehicle/Transport Selection -->
            <div class="step" id="step2">
                <h2>üöõ Select Vehicle/Transport Type</h2>
                <p class="step-description">
                    Choose the type of vehicle or transportation method for which you're reporting emissions. Different vehicle types have specific emission factors and calculation methods.
                </p>

                <div class="form-group">
                    <label>Select Vehicle Category *</label>
                    <div id="vehicleOptions">
                        <div class="vehicle-option" data-vehicle="passenger-car">
                            <div class="vehicle-icon car">üöó</div>
                            <div>
                                <strong>Passenger Car</strong>
                                <p>Sedans, hatchbacks, coupes, small SUVs</p>
                            </div>
                        </div>
                        <div class="vehicle-option" data-vehicle="light-truck">
                            <div class="vehicle-icon truck">üöõ</div>
                            <div>
                                <strong>Light Truck/Pickup</strong>
                                <p>Pickup trucks, delivery vans under 3.5 tonnes</p>
                            </div>
                        </div>
                        <div class="vehicle-option" data-vehicle="heavy-truck">
                            <div class="vehicle-icon truck">üöö</div>
                            <div>
                                <strong>Heavy Duty Truck</strong>
                                <p>Large delivery trucks, freight vehicles over 3.5 tonnes</p>
                            </div>
                        </div>
                        <div class="vehicle-option" data-vehicle="van">
                            <div class="vehicle-icon van">üöê</div>
                            <div>
                                <strong>Van/Minibus</strong>
                                <p>Service vans, passenger vans, small buses</p>
                            </div>
                        </div>
                        <div class="vehicle-option" data-vehicle="motorcycle">
                            <div class="vehicle-icon motorcycle">üèçÔ∏è</div>
                            <div>
                                <strong>Motorcycle/Scooter</strong>
                                <p>Motorcycles, scooters, mopeds</p>
                            </div>
                        </div>
                        <div class="vehicle-option" data-vehicle="equipment">
                            <div class="vehicle-icon equipment">üöú</div>
                            <div>
                                <strong>Mobile Equipment</strong>
                                <p>Construction equipment, forklifts, mobile generators</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="vehicle-details" id="vehicleDetails" style="display: none;">
                    <h4>Vehicle Specifications</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Vehicle ID/License Plate *</label>
                            <input type="text" placeholder="e.g., ABC-123, Fleet-001" id="vehicleId">
                        </div>
                        <div class="form-group">
                            <label>Fuel Type *</label>
                            <select id="fuelType">
                                <option value="gasoline">Gasoline/Petrol</option>
                                <option value="diesel">Diesel</option>
                                <option value="hybrid">Hybrid (Gasoline)</option>
                                <option value="electric">Electric (BEV)</option>
                                <option value="lpg">LPG</option>
                                <option value="cng">CNG</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-triple">
                        <div class="form-group">
                            <label>Make & Model</label>
                            <input type="text" placeholder="e.g., Toyota Camry" id="vehicleModel">
                        </div>
                        <div class="form-group">
                            <label>Model Year</label>
                            <input type="number" placeholder="2020" min="1990" max="2025" id="vehicleYear">
                        </div>
                        <div class="form-group">
                            <label>Engine Size (L)</label>
                            <input type="number" placeholder="2.0" step="0.1" id="engineSize">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 3: Period Selection -->
            <div class="step" id="step3">
                <h2>üìÖ Select Reporting Period</h2>
                <p class="step-description">
                    Specify the time period for vehicle usage and fuel consumption. You can report monthly, quarterly, or for custom date ranges.
                </p>

                <div class="responsive-grid">
                    <div class="form-group">
                        <label>Reporting Period Type *</label>
                        <select id="periodType">
                            <option value="monthly">Monthly</option>
                            <option value="quarterly">Quarterly</option>
                            <option value="trip-based">Individual Trip</option>
                            <option value="custom">Custom Range</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Month/Quarter *</label>
                        <select id="monthSelect">
                            <option value="2025-01">January 2025</option>
                            <option value="2025-02">February 2025</option>
                            <option value="2025-03" selected>March 2025</option>
                            <option value="2025-04">April 2025</option>
                        </select>
                    </div>
                </div>

                <div class="card">
                    <h3>üóìÔ∏è Period Status & Vehicle History</h3>
                    <div class="responsive-grid">
                        <div>
                            <strong>‚úÖ Complete Periods:</strong> Jan 2025, Feb 2025<br>
                            <strong>üîÑ Current Period:</strong> Mar 2025<br>
                            <strong>üìä Vehicle Activity:</strong> 15 trips recorded
                        </div>
                        <div>
                            <strong>Vehicle ABC-123 Previous Activity:</strong><br>
                            Feb 2025: 1,840 km, 142.3L fuel<br>
                            <em>Average: 7.7 L/100km</em>
                        </div>
                    </div>
                </div>

                <div class="trip-card">
                    <h4>üìç Trip/Route Information (Optional)</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Route Description</label>
                            <input type="text" placeholder="e.g., Office to Client Site A" id="routeDescription">
                        </div>
                        <div class="form-group">
                            <label>Trip Purpose</label>
                            <select id="tripPurpose">
                                <option value="business">Business Travel</option>
                                <option value="commuting">Commuting</option>
                                <option value="delivery">Delivery/Service</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 4: Data Input Method & Consumption -->
            <div class="step" id="step4">
                <h2>üìä Enter Vehicle Activity Data</h2>
                <p class="step-description">
                    Input vehicle usage data using your preferred method. You can enter fuel consumption directly or provide distance and let the system calculate based on vehicle efficiency.
                </p>

                <div class="input-method-toggle">
                    <button class="active" id="fuelMethod" onclick="switchInputMethod('fuel')">Fuel Consumption</button>
                    <button id="distanceMethod" onclick="switchInputMethod('distance')">Distance Traveled</button>
                </div>

                <!-- Fuel Consumption Method -->
                <div id="fuelInputSection">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Fuel Consumed *</label>
                            <input type="number" placeholder="Enter fuel amount" id="fuelConsumed" step="0.01">
                        </div>
                        <div class="form-group">
                            <label>Fuel Unit *</label>
                            <select id="fuelUnit">
                                <option value="liters">Liters</option>
                                <option value="gallons-us">Gallons (US)</option>
                                <option value="gallons-uk">Gallons (UK)</option>
                                <option value="kg">Kilograms</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Distance Traveled (Optional)</label>
                        <input type="number" placeholder="Kilometers for efficiency calculation" id="distanceOptional" step="0.1">
                    </div>
                </div>

                <!-- Distance Method -->
                <div id="distanceInputSection" style="display: none;">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Distance Traveled *</label>
                            <input type="number" placeholder="Enter distance" id="distanceTraveled" step="0.1">
                        </div>
                        <div class="form-group">
                            <label>Distance Unit *</label>
                            <select id="distanceUnit">
                                <option value="km">Kilometers</option>
                                <option value="miles">Miles</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Vehicle Fuel Efficiency</label>
                        <div class="form-row">
                            <input type="number" placeholder="8.5" step="0.1" id="fuelEfficiency">
                            <select id="efficiencyUnit">
                                <option value="l-100km">L/100km</option>
                                <option value="mpg-us">MPG (US)</option>
                                <option value="mpg-uk">MPG (UK)</option>
                                <option value="km-l">km/L</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="calculation-preview" id="calculationPreview" style="display: none;">
                    <h3>‚ö° Real-time Calculation Preview</h3>
                    <div class="emission-result" id="emissionResult">0.00 tonnes CO‚ÇÇe</div>
                    <p>Vehicle: <span id="previewVehicle">ABC-123</span> | Fuel: <span id="previewFuel">Gasoline</span></p>
                    <p>Efficiency: <span id="calculatedEfficiency">0.0 L/100km</span><span id="efficiencyRating"></span></p>
                </div>

                <div class="card">
                    <h3>üìà Vehicle Performance Context</h3>
                    <div class="responsive-grid">
                        <div>
                            <strong>Vehicle Average Efficiency:</strong> 7.8 L/100km<br>
                            <strong>Fleet Average:</strong> 8.2 L/100km<br>
                            <strong>Industry Benchmark:</strong> 7.5 L/100km
                        </div>
                        <div>
                            <strong>Previous Month:</strong> 142.3L, 1,840 km<br>
                            <strong>Monthly Average:</strong> 165.7L, 2,100 km<br>
                            <em>This vehicle performs above average</em>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 5: Emission Factors -->
            <div class="step" id="step5">
                <h2>üî¨ Emission Factor Configuration</h2>
                <p class="step-description">
                    Review the default emission factors for your vehicle type and fuel. Advanced users can specify custom factors based on manufacturer data or third-party testing.
                </p>

                <div class="factor-display">
                    <div class="factor-value">Default Gasoline Emission Factor: 2.31 kg CO‚ÇÇe/L</div>
                    <div class="factor-source">Source: IPCC 2024 - Passenger Car, Gasoline Engine</div>
                    <div class="factor-source">Includes: Combustion + Well-to-Tank emissions</div>
                </div>

                <div class="card">
                    <h4>üöó Vehicle-Specific Factors</h4>
                    <table class="summary-table">
                        <tr>
                            <th>Component</th>
                            <th>Factor</th>
                            <th>Unit</th>
                        </tr>
                        <tr>
                            <td>Direct CO‚ÇÇ</td>
                            <td>2.28</td>
                            <td>kg CO‚ÇÇ/L</td>
                        </tr>
                        <tr>
                            <td>Upstream (Well-to-Tank)</td>
                            <td>0.03</td>
                            <td>kg CO‚ÇÇe/L</td>
                        </tr>
                        <tr>
                            <td>CH‚ÇÑ + N‚ÇÇO</td>
                            <td>0.001</td>
                            <td>kg CO‚ÇÇe/L</td>
                        </tr>
                    </table>
                </div>

                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 10px;">
                        <span>Use Custom Emission Factor</span>
                        <div class="toggle-switch" id="customFactorToggle"></div>
                    </label>
                </div>

                <div id="customFactorSection" style="display: none;">
                    <div class="responsive-grid">
                        <div class="form-group">
                            <label>Custom Total Factor *</label>
                            <input type="number" placeholder="e.g., 2.35" step="0.001" id="customTotalFactor">
                        </div>
                        <div class="form-group">
                            <label>Factor Unit *</label>
                            <select id="customFactorUnit">
                                <option value="kg-co2e-l">kg CO‚ÇÇe/L</option>
                                <option value="kg-co2e-gal">kg CO‚ÇÇe/gallon</option>
                                <option value="kg-co2e-km">kg CO‚ÇÇe/km</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Factor Source/Reference *</label>
                        <input type="text" placeholder="e.g., Manufacturer Spec Sheet, EPA Database" id="factorSource">
                    </div>
                    
                    <div class="card">
                        <h3>‚ö†Ô∏è Custom vs Default Factor Comparison</h3>
                        <p><strong>Default Factor Result:</strong> <span id="defaultResult">0.00 tCO‚ÇÇe</span></p>
                        <p><strong>Custom Factor Result:</strong> <span id="customResult">0.00 tCO‚ÇÇe</span></p>
                        <p><strong>Difference:</strong> <span id="factorDifference">0.00 tCO‚ÇÇe (0.0%)</span></p>
                    </div>
                </div>
            </div>

            <!-- Step 6: Additional Data -->
            <div class="step" id="step6">
                <h2>üìé Additional Information & Documentation</h2>
                <p class="step-description">
                    Add supporting documentation, operational context, and vehicle maintenance information to enhance data quality and support fleet management.
                </p>

                <div class="form-group">
                    <label>Trip/Usage Notes</label>
                    <textarea rows="4" placeholder="Add context about vehicle usage, trip details, fuel quality, maintenance status..." id="usageNotes"></textarea>
                </div>

                <div class="form-group">
                    <label>Supporting Documents</label>
                    <div class="file-upload" id="fileUpload">
                        <div>üìÑ Click to upload or drag files here</div>
                        <p>Upload fuel receipts, logbooks, maintenance records, or odometer readings</p>
                        <small>Supported: PDF, JPG, PNG, Excel, CSV (Max 10MB each)</small>
                    </div>
                </div>

                <div class="responsive-grid">
                    <div class="form-group">
                        <label>Driver/Operator</label>
                        <input type="text" placeholder="e.g., John Smith, Delivery Team A" id="driverName">
                    </div>
                    <div class="form-group">
                        <label>Department/Cost Center</label>
                        <select id="department">
                            <option value="sales">Sales Department</option>
                            <option value="delivery">Delivery Operations</option>
                            <option value="maintenance">Maintenance Services</option>
                            <option value="executive">Executive Transport</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>

                <div class="card">
                    <h3>üîß Vehicle Condition & Performance</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Current Odometer (km)</label>
                            <input type="number" placeholder="125,430" id="odometerReading">
                        </div>
                        <div class="form-group">
                            <label>Last Service Date</label>
                            <input type="date" id="lastServiceDate">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Performance Notes</label>
                        <textarea rows="2" placeholder="Any performance issues, unusual fuel consumption, maintenance needs..." id="performanceNotes"></textarea>
                    </div>
                </div>

                <div class="card">
                    <h3>üìä Data Quality Assessment</h3>
                    <div class="responsive-grid">
                        <div>
                            <strong>Completeness Score:</strong> 92%<br>
                            <strong>Data Source:</strong> Fuel receipt + Logbook<br>
                            <strong>Verification:</strong> Driver confirmed
                        </div>
                        <div>
                            <strong>Efficiency Check:</strong> ‚úÖ Within normal range<br>
                            <strong>Validation:</strong> ‚ö†Ô∏è Slightly above average<br>
                            <strong>Approval Status:</strong> Auto-approved
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 7: Review & Confirm -->
            <div class="step" id="step7">
                <h2>üëÄ Review & Confirm Vehicle Entry</h2>
                <p class="step-description">
                    Please review all vehicle activity information before saving. This data will be included in your mobile combustion emissions inventory and fleet reports.
                </p>

                <div class="card">
                    <h3>üöó Vehicle & Trip Summary</h3>
                    <table class="summary-table">
                        <tr>
                            <th>Vehicle ID:</th>
                            <td><span id="reviewVehicleId">ABC-123</span></td>
                        </tr>
                        <tr>
                            <th>Vehicle Type:</th>
                            <td><span id="reviewVehicleType">Passenger Car (Toyota Camry, 2020)</span></td>
                        </tr>
                        <tr>
                            <th>Fuel Type:</th>
                            <td><span id="reviewFuelType">Gasoline</span></td>
                        </tr>
                        <tr>
                            <th>Reporting Period:</th>
                            <td><span id="reviewPeriod">March 2025</span></td>
                        </tr>
                        <tr>
                            <th>Fuel Consumed:</th>
                            <td><span id="reviewFuelConsumed">98.5 L</span></td>
                        </tr>
                        <tr>
                            <th>Distance Traveled:</th>
                            <td><span id="reviewDistance">1,247 km</span></td>
                        </tr>
                        <tr>
                            <th>Fuel Efficiency:</th>
                            <td><span id="reviewEfficiency">7.9 L/100km</span><span class="efficiency-indicator efficiency-good">Good</span></td>
                        </tr>
                        <tr>
                            <th>Emission Factor:</th>
                            <td><span id="reviewFactor">2.31 kg CO‚ÇÇe/L (IPCC Default)</span></td>
                        </tr>
                    </table>
                </div>

                <div class="calculation-preview">
                    <h3>üéØ Calculated Mobile Emissions</h3>
                    <div class="responsive-grid">
                        <div>
                            <div class="emission-result"><span id="reviewTotalEmissions">0.227</span> tonnes CO‚ÇÇe</div>
                            <p>Total emissions for this vehicle/period</p>
                        </div>
                        <div>
                            <strong>Breakdown:</strong><br>
                            Direct Combustion: 0.225 tCO‚ÇÇe<br>
                            Upstream (WTT): 0.002 tCO‚ÇÇe<br>
                            Rate: 18.2 g CO‚ÇÇe/km
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>üìà Fleet Impact Analysis</h3>
                    <div class="responsive-grid">
                        <div>
                            <strong>Vehicle Previous Month:</strong> 0.334 tCO‚ÇÇe<br>
                            <strong>This Entry:</strong> 0.227 tCO‚ÇÇe<br>
                            <strong>Change:</strong> -0.107 tCO‚ÇÇe (-32.0%)
                        </div>
                        <div>
                            <strong>Fleet YTD Total:</strong> 423.8 tCO‚ÇÇe<br>
                            <strong>Vehicle % of Fleet:</strong> 1.8%<br>
                            <strong>Fleet Target:</strong> 12% reduction achieved
                        </div>
                    </div>
                </div>

                <div class="trip-card">
                    <h4>üõ£Ô∏è Trip Context</h4>
                    <p><strong>Route:</strong> <span id="reviewRoute">Office to Client Site A</span></p>
                    <p><strong>Purpose:</strong> <span id="reviewPurpose">Business Travel</span></p>
                    <p><strong>Driver:</strong> <span id="reviewDriver">John Smith</span></p>
                    <p><strong>Department:</strong> <span id="reviewDepartment">Sales Department</span></p>
                </div>
            </div>

            <!-- Step 8: Processing -->
            <div class="step" id="step8">
                <h2>‚öôÔ∏è Processing Vehicle Data</h2>
                <p class="step-description">
                    The system is calculating mobile emissions, updating fleet analytics, and integrating with your emissions inventory. This includes efficiency analysis and fleet benchmarking.
                </p>

                <div class="card">
                    <h3>üîÑ Processing Steps</h3>
                    <div id="processingSteps">
                        <p>‚úÖ Validating vehicle and fuel data...</p>
                        <p>‚úÖ Converting units to standard format...</p>
                        <p>‚úÖ Calculating fuel efficiency metrics...</p>
                        <p>üîÑ Applying mobile emission factors...</p>
                        <p>‚è≥ Computing total GHG emissions...</p>
                        <p>‚è≥ Updating fleet analytics...</p>
                        <p>‚è≥ Generating performance benchmarks...</p>
                    </div>
                </div>

                <div class="calculation-preview">
                    <h3>üìä Detailed Calculation</h3>
                    <p><strong>Input:</strong> 98.5 L Gasoline, 1,247 km traveled</p>
                    <p><strong>Efficiency:</strong> 98.5L √∑ 1,247km √ó 100 = 7.9 L/100km</p>
                    <p><strong>Emissions:</strong> 98.5L √ó 2.31 kg CO‚ÇÇe/L = 227.5 kg CO‚ÇÇe</p>
                    <p><strong>Intensity:</strong> 227.5 kg √∑ 1,247 km = 18.2 g CO‚ÇÇe/km</p>
                </div>

                <div class="success-message" id="processingComplete" style="display: none;">
                    <h3>‚úÖ Processing Complete!</h3>
                    <p>Your mobile combustion data has been successfully calculated and integrated into fleet analytics.</p>
                    <p><strong>Entry ID:</strong> MC-2025-0158</p>
                </div>
            </div>

            <!-- Step 9: Results & Fleet Dashboard -->
            <div class="step" id="step9">
                <h2>üìä Results & Fleet Dashboard</h2>
                <p class="step-description">
                    Your vehicle data has been successfully processed and integrated into your mobile combustion inventory. View fleet performance, efficiency trends, and generate transportation reports.
                </p>

                <div class="success-message">
                    <h3>‚úÖ Vehicle Entry Successfully Saved</h3>
                    <p><strong>Entry ID:</strong> MC-2025-0158 | <strong>Vehicle:</strong> ABC-123 | <strong>Emissions:</strong> 0.227 tonnes CO‚ÇÇe</p>
                </div>

                <div class="dashboard-cards">
                    <div class="dashboard-card">
                        <h3>Vehicle ABC-123</h3>
                        <div class="value">0.227</div>
                        <p>tonnes CO‚ÇÇe</p>
                    </div>
                    <div class="dashboard-card">
                        <h3>March Fleet Total</h3>
                        <div class="value">156.8</div>
                        <p>tonnes CO‚ÇÇe</p>
                    </div>
                    <div class="dashboard-card">
                        <h3>Fleet Efficiency</h3>
                        <div class="value">8.1</div>
                        <p>L/100km average</p>
                    </div>
                    <div class="dashboard-card">
                        <h3>Target Progress</h3>
                        <div class="value">87%</div>
                        <p>on track</p>
                    </div>
                </div>

                <div class="card">
                    <h3>üöó Updated Fleet Summary</h3>
                    <table class="summary-table">
                        <thead>
                            <tr>
                                <th>Vehicle</th>
                                <th>Type</th>
                                <th>Distance (km)</th>
                                <th>Fuel (L)</th>
                                <th>Efficiency</th>
                                <th>Emissions (tCO‚ÇÇe)</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="background: #E8F5E8;">
                                <td>üöó ABC-123</td>
                                <td>Sedan</td>
                                <td>1,247</td>
                                <td>98.5</td>
                                <td>7.9 L/100km <span class="efficiency-indicator efficiency-good">Good</span></td>
                                <td>0.227</td>
                                <td>‚úèÔ∏è Edit | üóëÔ∏è Delete</td>
                            </tr>
                            <tr>
                                <td>üöõ XYZ-789</td>
                                <td>Truck</td>
                                <td>2,890</td>
                                <td>425.7</td>
                                <td>14.7 L/100km <span class="efficiency-indicator efficiency-average">Average</span></td>
                                <td>1.12</td>
                                <td>‚úèÔ∏è Edit | üóëÔ∏è Delete</td>
                            </tr>
                            <tr>
                                <td>üöê DEF-456</td>
                                <td>Van</td>
                                <td>1,865</td>
                                <td>167.3</td>
                                <td>8.9 L/100km <span class="efficiency-indicator efficiency-good">Good</span></td>
                                <td>0.44</td>
                                <td>‚úèÔ∏è Edit | üóëÔ∏è Delete</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="responsive-grid">
                    <div class="card">
                        <h3>üéØ Fleet Management Actions</h3>
                        <p>‚Ä¢ Review high-consumption vehicles (XYZ-789)</p>
                        <p>‚Ä¢ Schedule maintenance for vehicles due</p>
                        <p>‚Ä¢ Update driver efficiency training program</p>
                        <p>‚Ä¢ Consider hybrid replacements for high-mileage vehicles</p>
                        <p>‚Ä¢ Generate monthly fleet efficiency report</p>
                    </div>
                    <div class="card">
                        <h3>üìä Analytics & Reports</h3>
                        <p>‚Ä¢ View fleet efficiency trends</p>
                        <p>‚Ä¢ Export mobile emissions data</p>
                        <p>‚Ä¢ Compare vehicle performance</p>
                        <p>‚Ä¢ Generate carbon intensity reports</p>
                        <p>‚Ä¢ Set up automated fuel tracking</p>
                    </div>
                </div>

                <div class="card">
                    <h3>üèÜ Fleet Performance Insights</h3>
                    <div class="responsive-grid">
                        <div>
                            <strong>Best Performer:</strong> ABC-123 (7.9 L/100km)<br>
                            <strong>Needs Attention:</strong> XYZ-789 (14.7 L/100km)<br>
                            <strong>Fleet Average:</strong> 8.1 L/100km (‚Üì 0.3 vs last month)
                        </div>
                        <div>
                            <strong>CO‚ÇÇ Intensity:</strong> 18.2 g/km average<br>
                            <strong>Reduction YTD:</strong> 12.3% vs 2024<br>
                            <strong>Target Achievement:</strong> 87% complete
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="button-group">
            <div>
                <button class="btn btn-secondary" id="prevBtn" onclick="previousStep()" style="display: none;">‚Üê Previous</button>
            </div>
            <div>
                <button class="btn btn-primary" id="nextBtn" onclick="nextStep()">Begin Vehicle Entry ‚Üí</button>
                <button class="btn btn-success" id="saveBtn" onclick="saveEntry()" style="display: none;">üíæ Save Vehicle Data</button>
                <button class="btn btn-primary" id="finishBtn" onclick="finish()" style="display: none;">üöó Add Another Vehicle</button>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let inputMethod = 'fuel';
        const totalSteps = 9;
        const stepTitles = [
            "Fleet Overview",
            "Select Vehicle Type", 
            "Select Period",
            "Enter Activity Data",
            "Emission Factors",
            "Additional Information",
            "Review & Confirm",
            "Processing Data",
            "Fleet Dashboard"
        ];

        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('stepTitle').textContent = stepTitles[currentStep - 1];
            
            // Update step circles
            document.querySelectorAll('.step-circle').forEach((circle, index) => {
                circle.classList.remove('active', 'completed');
                if (index + 1 < currentStep) {
                    circle.classList.add('completed');
                } else if (index + 1 === currentStep) {
                    circle.classList.add('active');
                }
            });
        }

        function showStep(step) {
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            document.getElementById('step' + step).classList.add('active');
            
            // Update button visibility
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const saveBtn = document.getElementById('saveBtn');
            const finishBtn = document.getElementById('finishBtn');
            
            prevBtn.style.display = step > 1 ? 'inline-block' : 'none';
            
            if (step === 7) {
                nextBtn.style.display = 'none';
                saveBtn.style.display = 'inline-block';
                finishBtn.style.display = 'none';
            } else if (step === 9) {
                nextBtn.style.display = 'none';
                saveBtn.style.display = 'none';
                finishBtn.style.display = 'inline-block';
            } else {
                nextBtn.style.display = 'inline-block';
                saveBtn.style.display = 'none';
                finishBtn.style.display = 'none';
            }
            
            updateProgress();
        }

        function switchInputMethod(method) {
            inputMethod = method;
            const fuelBtn = document.getElementById('fuelMethod');
            const distanceBtn = document.getElementById('distanceMethod');
            const fuelSection = document.getElementById('fuelInputSection');
            const distanceSection = document.getElementById('distanceInputSection');
            
            if (method === 'fuel') {
                fuelBtn.classList.add('active');
                distanceBtn.classList.remove('active');
                fuelSection.style.display = 'block';
                distanceSection.style.display = 'none';
            } else {
                fuelBtn.classList.remove('active');
                distanceBtn.classList.add('active');
                fuelSection.style.display = 'none';
                distanceSection.style.display = 'block';
            }
        }

        function calculateEmissions() {
            const fuelConsumed = parseFloat(document.getElementById('fuelConsumed').value) || 0;
            const distanceTraveled = parseFloat(document.getElementById('distanceTraveled').value) || 0;
            const fuelEfficiency = parseFloat(document.getElementById('fuelEfficiency').value) || 0;
            
            let fuel = 0;
            let distance = 0;
            let efficiency = 0;
            
            if (inputMethod === 'fuel') {
                fuel = fuelConsumed;
                distance = parseFloat(document.getElementById('distanceOptional').value) || 0;
                if (fuel > 0 && distance > 0) {
                    efficiency = (fuel / distance) * 100;
                }
            } else {
                distance = distanceTraveled;
                efficiency = fuelEfficiency;
                if (distance > 0 && efficiency > 0) {
                    fuel = (distance * efficiency) / 100;
                }
            }
            
            const emissionFactor = 2.31; // kg CO2e/L for gasoline
            const emissions = (fuel * emissionFactor) / 1000; // Convert to tonnes
            
            const preview = document.getElementById('calculationPreview');
            if (fuel > 0 || distance > 0) {
                preview.style.display = 'block';
                document.getElementById('emissionResult').textContent = emissions.toFixed(3) + ' tonnes CO‚ÇÇe';
                
                if (efficiency > 0) {
                    document.getElementById('calculatedEfficiency').textContent = efficiency.toFixed(1) + ' L/100km';
                    
                    let efficiencyRating = '';
                    if (efficiency < 7.0) {
                        efficiencyRating = '<span class="efficiency-indicator efficiency-good">Excellent</span>';
                    } else if (efficiency < 9.0) {
                        efficiencyRating = '<span class="efficiency-indicator efficiency-good">Good</span>';
                    } else if (efficiency < 12.0) {
                        efficiencyRating = '<span class="efficiency-indicator efficiency-average">Average</span>';
                    } else {
                        efficiencyRating = '<span class="efficiency-indicator efficiency-poor">Poor</span>';
                    }
                    document.getElementById('efficiencyRating').innerHTML = efficiencyRating;
                }
            } else {
                preview.style.display = 'none';
            }
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                if (currentStep === 7) {
                    // Skip to step 8 (processing)
                    currentStep = 8;
                    showStep(currentStep);
                    
                    // Simulate processing
                    setTimeout(() => {
                        updateProcessingSteps();
                    }, 1000);
                    
                    setTimeout(() => {
                        currentStep = 9;
                        showStep(currentStep);
                    }, 4000);
                } else {
                    currentStep++;
                    showStep(currentStep);
                }
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
            }
        }

        function saveEntry() {
            currentStep = 8;
            showStep(currentStep);
            
            setTimeout(() => {
                updateProcessingSteps();
            }, 1000);
            
            setTimeout(() => {
                currentStep = 9;
                showStep(currentStep);
            }, 4000);
        }

        function finish() {
            currentStep = 1;
            showStep(currentStep);
            resetForm();
        }

        function resetForm() {
            document.querySelectorAll('input, select, textarea').forEach(field => {
                if (field.type === 'number' || field.type === 'text' || field.type === 'date' || field.tagName === 'TEXTAREA') {
                    field.value = '';
                } else if (field.tagName === 'SELECT') {
                    field.selectedIndex = 0;
                }
            });
            document.querySelectorAll('.vehicle-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.getElementById('vehicleDetails').style.display = 'none';
        }

        function updateProcessingSteps() {
            const steps = [
                "‚úÖ Validating vehicle and fuel data...",
                "‚úÖ Converting units to standard format...",
                "‚úÖ Calculating fuel efficiency metrics...",
                "‚úÖ Applying mobile emission factors...",
                "‚úÖ Computing total GHG emissions...",
                "‚úÖ Updating fleet analytics...",
                "‚úÖ Generating performance benchmarks..."
            ];
            
            document.getElementById('processingSteps').innerHTML = steps.join('<br>');
            document.getElementById('processingComplete').style.display = 'block';
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Vehicle selection
            document.querySelectorAll('.vehicle-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.vehicle-option').forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                    document.getElementById('vehicleDetails').style.display = 'block';
                });
            });

            // Real-time calculation for both methods
            ['fuelConsumed', 'distanceOptional', 'distanceTraveled', 'fuelEfficiency'].forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('input', calculateEmissions);
                }
            });

            // Custom factor toggle
            document.getElementById('customFactorToggle').addEventListener('click', function() {
                this.classList.toggle('active');
                const section = document.getElementById('customFactorSection');
                section.style.display = this.classList.contains('active') ? 'block' : 'none';
            });

            // File upload simulation
            document.getElementById('fileUpload').addEventListener('click', function() {
                alert('File upload dialog would open here in a real implementation');
            });

            showStep(1);
        });
    </script>
</body>
</html>